pixel.simon=function(t){this.bgLights=null,this.lights=null,this.emptyLights=null,this.didTheTestStart=!1,this.number=1,this.lightnumber=0,this.countsToGetUSB=10,this.sequence=[],this.computerTurn=!1,this.litLight=0,this.checkTime=null,this.currentCount=0,this.pillargroup=null,this.pillarX=[784,829,870,912],this.pillarY=-223,this.correctLight=0,this.playerCount=0,this.theSelectedLigt=0,pixel.loseTest=!1,pixel.winTheTest=!1,this.lightSound=null,this.winSound=null,this.LoseSound=null,this.worrior=null,this.simonSpeech=null},pixel.simon.prototype={create:function(){this.bgLights=this.add.sprite(0,0,"SimonBG2"),this.emptyLights=this.game.add.group();for(var t=0;3>t;t++)var e=this.emptyLights.create(358+75*t,280,"SimonLightsOFF",t);for(var t=0;3>t;t++)var e=this.emptyLights.create(358+75*t,380,"SimonLightsOFF",t+3);this.lights=this.game.add.group();for(var t=0;3>t;t++){var e=this.lights.create(347+75*t,280,"SimonLights",t);e.inputEnabled=!0,e.input.start(0,!0),e.events.onInputDown.add(this.select),e.events.onInputUp.add(this.release,this),e.events.onInputOut.add(this.moveOff),this.lights.getAt(t).alpha=0}for(var t=0;3>t;t++){var e=this.lights.create(347+75*t,380,"SimonLights",t+3);e.inputEnabled=!0,e.input.start(0,!0),e.events.onInputDown.add(this.select),e.events.onInputUp.add(this.release,this),e.events.onInputOut.add(this.moveOff),this.lights.getAt(t+3).alpha=0}this.pillargroup=this.game.add.group();for(var t=0;4>t;t++){var i=this.pillargroup.create(this.pillarX[t],this.pillarY,"SimonPillars",t);this.game.add.tween(i).to({y:i.y-100},1500+3e3*Math.random(),Phaser.Easing.Linear.NONE,!0,0,1/0,!0)}this.lightSound=this.game.add.audio("glowLightSound"),this.lightSound.volume=.1,this.winSound=this.game.add.audio("winTestSound"),this.LoseSound=this.game.add.audio("loseTestSound"),this.game.time.events.add(1e3,this.addWorrior,this)},addWorrior:function(){this.worrior=this.game.add.sprite(0,350,"worrior"),this.worrior.scale.setTo(.7),this.game.time.events.add(900,this.addSpeechBubble,this)},addSpeechBubble:function(){this.simonSpeech=this.game.add.sprite(160,200,"simonSpeech1"),this.simonSpeech.scale.setTo(.6),this.game.time.events.add(1e4,this.addSpeechBubble2,this)},addSpeechBubble2:function(){this.simonSpeech.alpha=0,this.simonSpeech=this.game.add.sprite(160,200,"simonSpeech2"),this.simonSpeech.scale.setTo(.6),this.game.time.events.add(7e3,this.startThisTest,this)},startThisTest:function(){this.worrior.alpha=0,this.simonSpeech.alpha=0;var t=this;this.startLightTest(),this.setUptheGame(),setTimeout(function(){t.ligtSequence(),t.didTheTestStart=!1},5e3)},startLightTest:function(){this.didTheTestStart=!0;for(var t=0;6>t;t++)this.game.add.tween(this.lights.getAt(t)).to({alpha:1},500,Phaser.Easing.Linear.None,!0,0,4,!0).to({alpha:.25},500,Phaser.Easing.Linear.None,!0)},setUptheGame:function(){for(var t=0;t<this.countsToGetUSB;t++)this.lightnumber=this.game.rnd.integerInRange(0,5),this.sequence.push(this.lightnumber);console.log(this.sequence)},ligtSequence:function(){this.computerTurn=!0,this.litLight=this.sequence[this.currentCount],this.lights.getAt(this.litLight).alpha=1,this.lightSound.play(),this.lightSound.volume=.1,this.checkTime=this.game.time.now,this.currentCount++},select:function(t,e){this.computerTurn||this.didTheTestStart||pixel.loseTest||pixel.winTheTest||(t.alpha=1)},release:function(t,e){this.computerTurn||this.didTheTestStart||pixel.loseTest||pixel.winTheTest||(t.alpha=.25,this.playerSequence(t))},moveOff:function(t,e){this.computerTurn||this.didTheTestStart||pixel.loseTest||pixel.winTheTest||(t.alpha=.25)},playerSequence:function(t){this.correctLight=this.sequence[this.playerCount],this.playerCount++,this.theSelectedLigt=this.lights.getIndex(t),this.theSelectedLigt===this.correctLight?this.playerCount===this.number&&(this.number===this.countsToGetUSB?(pixel.winTheTest=!0,pixel.getUSB=!0,console.log("You win the game"),pixel.isTheLevelPaused=!1,this.winSound.play(),this.winSound.volume=.25,this.worrior.alpha=1,this.simonSpeech=this.game.add.sprite(160,200,"simonWin"),this.simonSpeech.scale.setTo(.6),pixel.EnteredSimon=!0,this.restartTest(),this.game.time.events.add(7e3,this.moveBackToLevel,this)):(this.playerCount=0,this.currentCount=0,this.number++,this.computerTurn=!0,console.log(this.theSelectedLigt),console.log(this.computerTurn),console.log(this.number))):(pixel.loseTest=!0,console.log("You lose the game"),pixel.isTheLevelPaused=!1,this.LoseSound.play(),this.LoseSound.volume=.25,this.worrior.alpha=1,this.simonSpeech=this.game.add.sprite(160,200,"simonLose"),this.simonSpeech.scale.setTo(.6),pixel.EnteredSimon=!0,this.restartTest(),this.game.time.events.add(7e3,this.moveBackToLevel,this))},moveBackToLevel:function(){this.state.start("LevelTwo")},updateGame:function(){this.currentCount<this.number?(this.game.paused=!1,this.ligtSequence()):(this.computerTurn=!1,this.game.paused=!1)},restartTest:function(){this.bgLights=null,this.lights=null,this.emptyLights=null,this.didTheTestStart=!1,this.number=1,this.lightnumber=0,this.countsToGetUSB=10,this.sequence=[],this.computerTurn=!1,this.litLight=0,this.checkTime=null,this.currentCount=0,this.correctLight=0,this.playerCount=0,this.theSelectedLigt=0,this.lightSound=null,this.winSound=null,this.LoseSound=null,this.worrior=null,this.simonSpeech=null},update:function(){var t=this;1==this.computerTurn&&this.game.time.now-this.checkTime>750-40*this.number&&(this.lights.getAt(this.litLight).alpha=.25,this.game.paused=!0,setTimeout(function(){t.currentCount<t.number?(t.game.paused=!1,t.ligtSequence()):(t.computerTurn=!1,t.game.paused=!1)},400-20*this.number))}};